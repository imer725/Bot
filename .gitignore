from telegram import Update
from telegram.ext import Updater, CommandHandler, CallbackContext
import random

# Bot Token
TOKEN = 7325807571:AAE-wxy8jWW8-iXFy_xTSJVDVBcSP2t8K0Y

# KullanÄ±cÄ± verisi (10000000) saklamak iÃ§in basit bir dictionary
user_data = {}

# Komutlar
def start(update: Update, context: CallbackContext):
    update.message.reply_text("ğŸ¥°Botumuza tekrar hoÅŸgeldin! AÅŸaÄŸÄ±daki komutlarÄ± kullanabilirsinizğŸ¥°\n"
                              "/bj [miktar] - Black Jack oyununu baÅŸlatÄ±r\n"
                              "/cek - Kart Ã§eker\n"
                              "/bitir - Black Jack oyununu bitirir\n"
                              "/slot [miktar] - Slot oyununu oynamak iÃ§in bahis yapÄ±n\n"
                              "/ip [ip_adresi] - IP sorgu yapar\n"
                              "/bakiye - Mevcut bakiyenizi kontrol edin\n"
                              "/risk - Risk oyunu oynayÄ±p bakiye kazanabilirsiniz\n"
                              "/borc [KullanÄ±cÄ± Ä°d] [miktar] - BaÅŸka bir kullanÄ±cÄ±ya bakiye gÃ¶nderir\n"
                              "/zenginler - Genel sÄ±ralamayÄ± gÃ¶sterir\n"
                              "/bakiyever [chat_id] [miktar] - Bir kullanÄ±cÄ±ya bakiye ekler (sadece kurucu)")

def bakiye(update: Update, context: CallbackContext):
    user_id = update.message.from_user.id
    balance = user_data.get(user_id, 0)
    update.message.reply_text(f"ğŸ’° Mevcut bakiyeniz: {balance} TL")

def bj(update: Update, context: CallbackContext):
    user_id = update.message.from_user.id
    if len(context.args) < 1:
        update.message.reply_text("LÃ¼tfen bir miktar belirtin.")
        return
    try:
        bet_amount = int(context.args[0])
    except ValueError:
        update.message.reply_text("GeÃ§ersiz miktar.")
        return
    
    balance = user_data.get(user_id, 0)
    if balance < bet_amount:
        update.message.reply_text("Yeterli bakiyeniz yok.")
        return

    # Black Jack baÅŸlangÄ±cÄ±
    update.message.reply_text(f"ğŸƒ Black Jack oyununu {bet_amount} TL ile baÅŸlattÄ±nÄ±z!")

    # Oyun bitimi - burada Black Jack mantÄ±ÄŸÄ±nÄ± ekleyebilirsiniz.

def slot(update: Update, context: CallbackContext):
    user_id = update.message.from_user.id
    if len(context.args) < 1:
        update.message.reply_text("LÃ¼tfen bir miktar belirtin.")
        return
    try:
        bet_amount = int(context.args[0])
    except ValueError:
        update.message.reply_text("GeÃ§ersiz miktar.")
        return

    balance = user_data.get(user_id, 0)
    if balance < bet_amount:
        update.message.reply_text("Yeterli bakiyeniz yok.")
        return

    # Slot oyunu mantÄ±ÄŸÄ±nÄ± buraya ekleyebilirsiniz.
    update.message.reply_text(f"ğŸ° Slot oyununu {bet_amount} TL ile oynuyorsunuz!")

def ip_sorgu(update: Update, context: CallbackContext):
    if len(context.args) < 1:
        update.message.reply_text("LÃ¼tfen bir IP adresi belirtin.")
        return
    ip_address = context.args[0]
    # Burada IP sorgulama yapabilirsiniz.
    update.message.reply_text(f"IP adresi sorgulandÄ±: {ip_address}")

def borc(update: Update, context: CallbackContext):
    if len(context.args) < 2:
        update.message.reply_text("5853688989 10000000")
        return
    try:
        recipient_id = int(context.args[0])
        amount = int(context.args[1])
    except ValueError:
        update.message.reply_text("GeÃ§ersiz veri.")
        return
    
    sender_id = update.message.from_user.id
    sender_balance = user_data.get(sender_id, 0)
    if sender_balance < amount:
        update.message.reply_text("Yeterli bakiyeniz yok.")
        return

    # BorÃ§ gÃ¶nderme iÅŸlemi
    user_data[sender_id] -= amount
    user_data[recipient_id] = user_data.get(recipient_id, 0) + amount
    update.message.reply_text(f"ğŸ’¸ {recipient_id} kullanÄ±cÄ±sÄ±na {amount} TL borÃ§ gÃ¶nderdiniz.")

def zenginler(update: Update, context: CallbackContext):
    top_users = sorted(user_data.items(), key=lambda x: x[1], reverse=True)
    top_users_str = "\n".join([f"User {user_id}: {balance} TL" for user_id, balance in top_users])
    update.message.reply_text(f"ğŸ† Genel Zenginler SÄ±ralamasÄ±:\n{top_users_str}")

def bakiyever(update: Update, context: CallbackContext):
    if len(context.args) < 2:
        update.message.reply_text("LÃ¼tfen bir kullanÄ±cÄ± ID'si ve miktar belirtin.")
        return
    if update.message.from_user.id != YOUR_CREATOR_ID:  # Botun kurucusu
        update.message.reply_text("Bu komutu yalnÄ±zca kurucu kullanabilir.")
        return
    try:
        user_id = int(context.args[0])
        amount = int(context.args[1])
    except ValueError:
        update.message.reply_text("GeÃ§ersiz veri.")
        return

    user_data[user_id] = user_data.get(user_id, 0) + amount
    update.message.reply_text(f"ğŸ’° {user_id} kullanÄ±cÄ±sÄ±na {amount} TL bakiye eklendi.")

def main():
    updater = Updater(TOKEN, use_context=True)
    dp = updater.dispatcher

    dp.add_handler(CommandHandler("start", start))
    dp.add_handler(CommandHandler("bakiye", bakiye))
    dp.add_handler(CommandHandler("bj", bj, pass_args=True))
    dp.add_handler(CommandHandler("slot", slot, pass_args=True))
    dp.add_handler(CommandHandler("ip", ip_sorgu, pass_args=True))
    dp.add_handler(CommandHandler("borc", borc, pass_args=True))
    dp.add_handler(CommandHandler("zenginler", zenginler))
    dp.add_handler(CommandHandler("bakiyever", bakiyever, pass_args=True))

    updater.start_polling()
    updater.idle()

if __name__ == '__main__':
    main()
